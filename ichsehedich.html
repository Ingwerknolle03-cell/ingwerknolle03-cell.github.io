<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Desktop</title>
<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:#1e3c72;
  background:linear-gradient(135deg,#1e3c72,#2a5298);
  overflow:hidden;
  font-family:Segoe UI, Arial, sans-serif;
  cursor:default;
}

/* TASKBAR */
#taskbar{
  position:absolute;
  bottom:0;
  width:100%;
  height:40px;
  background:#111;
  color:white;
  display:flex;
  align-items:center;
  padding:0 10px;
  box-sizing:border-box;
}
#clock{margin-left:auto;font-size:14px}

/* DESKTOP ICON */
.icon{
  width:90px;
  text-align:center;
  color:white;
  margin:20px;
  cursor:pointer;
}
.icon div{font-size:48px}

/* WINDOW */
.window{
  position:absolute;
  width:420px;
  background:#f0f0f0;
  border:1px solid #999;
  box-shadow:0 0 25px rgba(0,0,0,.6);
}
.titlebar{
  background:#0078d7;
  color:white;
  padding:6px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  cursor:move;
}
.controls span{
  margin-left:8px;
  cursor:pointer;
}
.content{
  padding:12px;
  font-size:14px;
  color:#000;
}

/* EFFECTS */
.freeze{
  pointer-events:none;
  filter:blur(1px);
}
.shake{
  animation:shake .15s infinite;
}
@keyframes shake{
  0%{transform:translate(1px,1px)}
  50%{transform:translate(-2px,0)}
  100%{transform:translate(1px,-2px)}
}
.bar{
  height:12px;
  background:#ccc;
  margin-top:10px;
}
.fill{
  height:100%;
  width:0%;
  background:#0078d7;
}
</style>
</head>
<body>

<div class="icon" id="exe">
  <div>üñ•Ô∏è</div>
  CoolGame_Setup.exe
</div>

<div id="taskbar">
  Start
  <div id="clock"></div>
</div>

<script>
let phase=0;
let lag=false;

function clock(){
  const d=new Date();
  document.getElementById("clock").textContent=
    d.getHours().toString().padStart(2,"0")+":"+
    d.getMinutes().toString().padStart(2,"0");
}
setInterval(clock,1000);clock();

function makeWindow(title,html,x=200,y=150){
  const w=document.createElement("div");
  w.className="window";
  w.style.left=x+"px";w.style.top=y+"px";
  w.innerHTML=`
    <div class="titlebar">
      <span>${title}</span>
      <div class="controls">
        <span>‚Äî</span><span>‚ñ¢</span><span class="close">‚úñ</span>
      </div>
    </div>
    <div class="content">${html}</div>
  `;
  document.body.appendChild(w);

  let ox,oy,d=false;
  w.querySelector(".titlebar").onmousedown=e=>{
    d=true;ox=e.offsetX;oy=e.offsetY;
  };
  document.onmouseup=()=>d=false;
  document.onmousemove=e=>{
    if(d){
      w.style.left=e.clientX-ox+"px";
      w.style.top=e.clientY-oy+"px";
    }
  };

  w.querySelector(".close").onclick=()=>{
    w.remove();
    if(phase>=3){
      setTimeout(()=>makeWindow(
        "Hinweis",
        "Du hast gedacht, das war alles?",
        Math.random()*400+100,
        Math.random()*300+100
      ),600);
    }
  };
  return w;
}

/* START */
document.getElementById("exe").ondblclick=()=>{
  if(phase>0)return;
  phase=1;
  const win=makeWindow("Installer",
    "Vorbereitung l√§uft‚Ä¶<div class='bar'><div class='fill' id='f'></div></div>");
  let p=0;
  const f=win.querySelector("#f");
  const iv=setInterval(()=>{
    if(lag)return;
    p+=Math.random()*4;
    f.style.width=p+"%";
    if(p>100){
      clearInterval(iv);
      phase=2;
      win.querySelector(".content").innerHTML=
        "√úberpr√ºfung‚Ä¶ bitte warten.";
      scareSequence();
    }
  },80);
};

/* ESCALATION */
function scareSequence(){
  setTimeout(()=>{
    document.body.classList.add("freeze");
    setTimeout(()=>document.body.classList.remove("freeze"),700);
  },800);

  setTimeout(()=>{
    makeWindow("Windows Defender",
      "Bedrohung erkannt.<br><b>Risiko: Unbekannt</b>");
    phase=3;
  },1800);

  setInterval(()=>{
    if(phase>=3 && Math.random()<0.3){
      lag=true;
      document.body.classList.add("shake");
      setTimeout(()=>{
        lag=false;
        document.body.classList.remove("shake");
      },400);
    }
  },2000);

  setInterval(()=>{
    if(phase>=3){
      makeWindow(
        "System",
        ["Keine Sorge.","Das ist normal.","Warum friert es ein?","Bitte nicht schlie√üen."][Math.floor(Math.random()*4)],
        Math.random()*500+50,
        Math.random()*300+50
      );
    }
  },3000);
}
</script>
</body>
</html>

</body>
</html>
