
<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Pixel Garden Deluxe</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  background: linear-gradient(to top, #7ec850 0%, #a0d8ef 100%);
  font-family: monospace;
}
#gameUI {
  position: absolute;
  top: 10px;
  left: 10px;
  z-index: 10;
}
button {
  font-size: 14px;
  padding: 5px 8px;
  margin: 3px;
  cursor: pointer;
}
#log {
  position: absolute;
  bottom: 10px;
  left: 10px;
  width: 300px;
  max-height: 200px;
  overflow-y: auto;
  background: rgba(255,255,255,0.7);
  border: 1px solid #0a0;
  padding: 5px;
  font-size: 12px;
}
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="gameUI">
  <button id="waterBtn">üíß Gie√üen</button>
  <button id="sunBtn">‚òÄÔ∏è Sonne</button>
  <button id="rainBtn">üåß Regen</button>
  <button id="beeGameBtn">üêù Bienen-Spiel</button>
  <button id="saveBtn">üíæ Speichern</button>
  <button id="loadBtn">üìÇ Laden</button>
  <input type="file" id="fileInput" style="display:none;" accept=".json" />
</div>
<div id="log"></div>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const logDiv = document.getElementById('log');
function log(text){
  const p = document.createElement('div');
  p.textContent = text;
  logDiv.appendChild(p);
  logDiv.scrollTop = logDiv.scrollHeight;
}

// Game State
let game = {
  flowers: [],
  seedPlanted: false,
  flowerGrowth: 0,
  muldes: [],
  bees: [],
  rain: false,
  sun: 1,
  nectar: 0
};

// Vogel Einf√ºhrung
let bird = {x:-100,y:150,targetX:canvas.width/2,hasSeed:false};

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Himmel
  const skyGradient = ctx.createLinearGradient(0,0,0,canvas.height);
  skyGradient.addColorStop(0,'#a0d8ef');
  skyGradient.addColorStop(1,'#7ec850');
  ctx.fillStyle = skyGradient;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // Sonne
  ctx.beginPath();
  ctx.arc(100,100,60,0,Math.PI*2);
  ctx.fillStyle = '#fff200';
  ctx.fill();
  ctx.closePath();

  // Wolken
  for(let i=0;i<3;i++){
    ctx.fillStyle='rgba(255,255,255,0.8)';
    let cx = (i*200 + Date.now()/50)%canvas.width;
    ctx.beginPath();
    ctx.arc(cx,80,40,0,Math.PI*2);
    ctx.arc(cx+40,80,35,0,Math.PI*2);
    ctx.arc(cx+20,60,30,0,Math.PI*2);
    ctx.fill();
  }

  // Gras
  ctx.fillStyle = '#0a0';
  for(let i=0;i<canvas.width;i+=5){
    const h = 20+10*Math.sin((i+Date.now()/100)/50);
    ctx.fillRect(i,canvas.height-h,2,h);
  }

  // Mulden (Wasser)
  ctx.fillStyle='#0077aa';
  game.muldes.forEach(m=>{
    ctx.beginPath();
    ctx.ellipse(m.x,m.y,25,12,0,0,Math.PI*2);
    ctx.fill();
  });

  // Vogel
  if(!game.seedPlanted){
    ctx.fillStyle='#f00';
    ctx.beginPath();
    ctx.arc(bird.x,bird.y,20,0,Math.PI*2);
    ctx.fill();
    if(bird.x<bird.targetX) bird.x+=2;
    else if(!bird.hasSeed){
      log('üê¶ Vogel bringt Samen!');
      bird.hasSeed=true;
    }else{
      game.seedPlanted=true;
      game.flowers.push({x:bird.x,y:bird.y,size:0});
      log('üåº Ringelblumen-Samen f√§llt auf die Erde!');
    }
  }

  // Blumen wachsen
  game.flowers.forEach(f=>{
    f.size += 0.002*(1+game.sun+game.nectar);
    if(f.size>1) f.size=1;
    // St√§ngel
    ctx.fillStyle='#0a0';
    ctx.fillRect(f.x-3,f.y,6,60*f.size);
    // Bl√ºte
    ctx.fillStyle='#ffcc00';
    ctx.beginPath();
    ctx.arc(f.x,f.y-20*f.size,15*f.size,0,Math.PI*2);
    ctx.fill();
    // Petalen animiert
    for(let p=0;p<5;p++){
      const angle = (Date.now()/500 + p*72)*Math.PI/180;
      const px = f.x + Math.cos(angle)*15*f.size;
      const py = f.y-20*f.size + Math.sin(angle)*15*f.size;
      ctx.beginPath();
      ctx.arc(px,py,6*f.size,0,Math.PI*2);
      ctx.fill();
    }
  });

  // Bienen
  game.bees.forEach(b=>{
    ctx.fillStyle='#ff0';
    ctx.beginPath();
    ctx.arc(b.x,b.y,6,0,Math.PI*2);
    ctx.fill();
    b.x+=b.vx;
    b.y+=b.vy;
    // Biene abprallen
    if(b.x>canvas.width||b.x<0) b.vx*=-1;
    if(b.y>canvas.height||b.y<0) b.vy*=-1;
  });

  requestAnimationFrame(draw);
}
draw();

// UI Actions
document.getElementById('waterBtn').onclick = ()=>{
  log('üíß Du gie√üt die Blumen!');
  game.nectar+=0.2;
};
document.getElementById('sunBtn').onclick = ()=>{
  log('‚òÄÔ∏è Sonne scheint!');
  game.sun+=0.2;
};
document.getElementById('rainBtn').onclick = ()=>{
  game.rain=!game.rain;
  log(game.rain?'üåß Es regnet jetzt!':'üåß Regen endet');
  if(game.rain){ game.muldes.forEach(m=>game.nectar+=0.5); }
};
document.getElementById('beeGameBtn').onclick = ()=>{
  for(let i=0;i<7;i++){
    game.bees.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height/2,vx:1+Math.random()*2,vy:(Math.random()-0.5)*1});
  }
  log('üêù Bienen fliegen! Fange sie f√ºr Nektar!');
};

// Save/Load
const saveBtn = document.getElementById('saveBtn');
const loadBtn = document.getElementById('loadBtn');
const fileInput = document.getElementById('fileInput');
saveBtn.onclick = ()=>{
  const blob = new Blob([JSON.stringify(game)],{type:'application/json'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download='pixel_garden_save.json';
  a.click();
  log('üíæ Spiel gespeichert');
};
loadBtn.onclick=()=>fileInput.click();
fileInput.onchange=()=>{
  const file = fileInput.files[0];
  const reader = new FileReader();
  reader.onload=e=>{
    try{
      game = JSON.parse(e.target.result);
      log('üìÇ Spiel geladen');
    }catch(err){log('Fehler beim Laden');}
  };
  reader.readAsText(file);
};

// Mulden platzieren
canvas.addEventListener('click',e=>{
  game.muldes.push({x:e.clientX,y:e.clientY});
  log('‚õè Mulde erstellt');
});
</script>
</body>
</html>
